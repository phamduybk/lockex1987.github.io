<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <title>Laravel Encryption</title>
  </head>
  <body>
    <h1>Encryption</h1>
    <p>Encrypter của Laravel sử dụng OpenSSL để cung cấp mã hóa AES-256 và
      AES-128. Bạn nên sử dụng mã hóa của Laravel được xây dựng trong thuật toán
      mã hóa. Tất cả giá trị mã hóa của Laravel được đăng ký sử dụng một mã
      (MAC) để phát hiện chỉnh sửa ở chuỗi được mã hóa.</p>
    <h2>Cấu hình</h2>
    <p>Trước khi sử dụng mã hõa của Laravel, bạn phải đặt một <code>key</code>
      trong file cấu hình <code>config/app.php</code>.
      Bạn có dùng lệnh <code>php artisan key:generate</code> để
      tạo ra key này vì lệnh Artisan command sẽ sử dụng secure random bytes của
      PHP để tạo ra key. Nếu giá trị này không được đặt, tất cả mã hóa của
      Laravel sẽ không an toàn.</p>
    <h2>Sử dụng encrypter</h2>
    <h4>Giá trị của một encrypting</h4>
    <p>Bạn có thể mã hoá một giá trị sử dụng <code>enrypt</code>. Tất cả các
      giá trị được mã hoá sử dụng OpenSSL và thuật toán <code>AES-256-CBC</code>
      cipher. Thêm nữa, các giá trị này được kí với mã MAC (Message
      Authetication Code) để phát hiện chỉnh sửa ở chuỗi đã được mã hoá:</p>
    <pre><code>&lt;?php

namespace App\Http\Controllers;

use App\User;
use Illuminate\Http\Request;
use App\Http\Controllers\Controller;

class UserController extends Controller
{
    /**
     * Store a secret message for the user.
     *
     * @param    Request  $request
     * @param    int  $id
     * @return  Response
     */
    public function storeSecret(Request $request, $id)
    {
        $user = User::findOrFail($id);

        $user-&gt;fill([
            'secret' =&gt; encrypt($request-&gt;secret)
        ])-&gt;save();
    }
}</code></pre>
    <p> Các giá trị được mã hoá sẽ truyền vào <code>serialize</code> trong quá
      trình mã hóa, nó có thể mã hóa đối tượng và mảng. Vì vậy, các phía nhận
      giá trị mã hoá không phải từ PHP thì sẽ cần phải <code>unserialize</code>
      dữ liệu.</p>
    <h4>Giải mã một giá trị</h4>
    <p>Bạn có thể giải mã bằng phương thức <code>decrypt</code>. Nếu như giá
      trị không thể giải mã hoàn chỉnh, ví dụ như mã MAC là không hợp lệ, thì
      một ngoại lệ <code>Illuminate\Contracts\Encryption\DecryptException</code>
      sẽ được ném ra:</p>
    <pre><code>use Illuminate\Contracts\Encryption\DecryptException;

try {
    $decrypted = decrypt($encryptedValue);
} catch (DecryptException $e) {
    //
}</code></pre>
    <p> Nguồn: <a href="https://laravel.com/docs/5.3/encryption">https://laravel.com/docs/5.3/encryption</a>
    </p>
  </body>
</html>
