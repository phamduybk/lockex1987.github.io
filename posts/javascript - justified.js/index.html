<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Justified.js</title>
    <meta name="description" content="jQuery Plugin to create Justified Image Gallery">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="lib/justified/jquery.justified.css">
</head>

<body>
    <section class="body demo">
        <div class="container">
            <h3>Play around with the demo</h3>
            <div class="demo-container clearfix">
                <form class="form-vertical" id="grid-form" role="form">
                    <div class="form-group">
                        <label for="numPhotos" class="col-sm-4 control-label">Number of Photo</label>
                        <input type="number" min=1 max=500 step=1 value="20" class="form-control" id="numPhotos">
                    </div>
                    <div class="form-group">
                        <label for="minHeight" class="col-sm-4 control-label">Row Height</label>
                        <input type="number" min=100 max=600 step=10 value="150" class="form-control" id="minHeight">
                    </div>
                    <div class="form-group">
                        <label for="maxHeight" class="col-sm-4 control-label">Maximum Row Height</label>
                        <input type="number" min=500 max=1000 step=10 value="500" class="form-control" id="maxHeight">
                    </div>
                    <div class="form-group">
                        <label for="margin" class="col-sm-4 control-label">Margin</label>
                        <input type="number" min=0 max=5 step=1 value="1" class="form-control" id="margin">
                    </div>
                    <div class="form-group">

                        <button type="submit" class="btn btn-default">Refresh Grid</button>

                    </div>
                </form>

                <div class="image-container"></div>
            </div>
            <p>http://nitinhayaran.github.io/Justified.js/demo/index.html</p>
            <p>TODO: My Idols</p>
        </div>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="lib/justified/jquery.justified.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#grid-form').submit(function(e) {
                e.preventDefault();
                $.ajax({
                    url: 'https://api.flickr.com/services/rest/?jsoncallback=?',
                    method: 'get',
                    data: {
                        method: 'flickr.photos.search',
                        api_key: '2b76793b6787a09c14929811d2cef67e',
                        text: 'potrait',
                        sort: 'interestingness-desc',
                        format: 'json',
                        extras: 'url_t,url_s,url_q,url_m,url_n,url_z,url_c,url_l',
                        per_page: $('#numPhotos').val()
                    },
                    dataType: 'json',
                    success: function(data) {
                        console.log(data.photos.photo);
                        showPhotos(data.photos.photo);
                    }
                })
            });

            $('#grid-form').submit();
        });

        var showPhotos = function(photos) {
            $('.image-container').empty().justifiedImages({
                images: photos,
                rowHeight: $('#minHeight').val(),
                maxRowHeight: $('#maxHeight').val(),
                thumbnailPath: function(photo, width, height) {
                    var purl = photo.url_s;
                    if (photo.url_n && (width > photo.width_s * 1.2 || height > photo.height_s * 1.2)) purl = photo.url_n;
                    if (photo.url_m && (width > photo.width_n * 1.2 || height > photo.height_n * 1.2)) purl = photo.url_m;
                    if (photo.url_z && (width > photo.width_m * 1.2 || height > photo.height_m * 1.2)) purl = photo.url_z;
                    if (photo.url_l && (width > photo.width_z * 1.2 || height > photo.height_z * 1.2)) purl = photo.url_l;
                    return purl;
                },
                getSize: function(photo) {
                    return { width: photo.width_s, height: photo.height_s };
                },
                margin: $('#margin').val()/*,
                appendBlocks: function(){
                    return [{
                        rowNum : 1,
                        width : 150,
                        html : '<a href="#">Add Photo</a>'
                    },{
                        rowNum : -1,
                        width : 150,
                        html : '<a href="#">Add Last Photo</a>'
                    }]
                }*/
            });
        }
    </script>
</body>

</html>