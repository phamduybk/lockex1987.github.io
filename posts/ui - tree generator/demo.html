<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tree Generator</title>
<!--link rel="stylesheet" href="css/style.css"-->
<style>
* { box-sizing: border-box; }
body { background:black; }
#canvas { position: fixed; top: 0; left: 0; height: calc(100vh - 50px); width: 100vw; }
</style>
</head>
<body>
<canvas id="canvas" onClick="drawTree()"></canvas>

<!--script src="js/index.js"></script-->

<script>
let canvas = document.getElementById('canvas');
let ctx = canvas.getContext('2d');

let modifiers = { min: 0, max: 1, decay: 90 };

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

drawTree();

function drawTree() {
ctx.clearRect(0, 0, canvas.width, canvas.height);

drawBranch({ x: canvas.width / 2, y: canvas.height }, 75, -90);
}

function drawBranch(start_position, length, angle) {
if (length < 10) {
return;
}

let target = getTargetByRadial(start_position, length, angle);
ctx.strokeStyle = "white";
ctx.shadowBlur = 1;
ctx.shadowColor = "black";
ctx.lineWidth = length * .1;
ctx.beginPath();
ctx.moveTo(start_position.x, start_position.y);
ctx.lineTo(target.x, target.y)
ctx.stroke();

let min = modifiers.min;
let max = modifiers.max;
let decay = modifiers.decay;

let num_branches = Math.ceil(Math.random() * (max - min + 1) + min);
for (var i = 0; i < num_branches; i++) {
let next_decay = Math.random() * (10) + (decay - 5);
let next_angle = angle + Math.random() * (90) - 45;
setTimeout(function() { drawBranch(target, length * next_decay / 100, next_angle); }, 100);
}
}

function getTargetByRadial(start_position, length, angle) {
let radian = angle * Math.PI / 180;
return {
x: start_position.x + length * Math.cos(radian),
y: start_position.y + length * Math.sin(radian)
};
}

</script>
</body>
</html>


