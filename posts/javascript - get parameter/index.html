<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Lấy giá trị tham số từ URL bằng JavaScript">
    <meta name="keywords" content="javascript">
    <meta name="author" content="lockex1987">
    <title>Get Parameter</title>
    <link rel="icon" href="../../images/favicon.png">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../lib/highlightjs/css/default.css">
    <script src="../../lib/highlightjs/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
    <article>
      <h2>Lấy giá trị tham số từ URL bằng JavaScript</h2>
      <p>Sử dụng cắt xâu bình thường:</p>
      <pre><code class="javascript">function getParameter(param) {
&nbsp; &nbsp; var url = window.location.search.substring(1);
&nbsp; &nbsp; var vars = url.split("&amp;");
  &nbsp; for (var i = 0; i &lt; vars.length; i++) {
&nbsp; &nbsp; &nbsp; &nbsp; var pair = vars[i].split("=");
 &nbsp; &nbsp; &nbsp; &nbsp;if (pair[0] == param) {
      &nbsp; &nbsp; &nbsp; return decodeURIComponent(pair[1]);
&nbsp; &nbsp; &nbsp; &nbsp; }
&nbsp; &nbsp; }
&nbsp; &nbsp; return null;
}</code></pre>
      <p>Sử dụng API mới URLSearchParams (một số trình duyệt có thể không hỗ
        trợ):</p>
      <pre><code class="javascript">function getParameter(param) {
&nbsp; &nbsp; var url = window.location.search;
&nbsp; &nbsp; var urlParams = new URLSearchParams(window.location.search);
&nbsp; &nbsp; return urlParams.get(param);
}</code></pre>
      
      <!--p>Kết quả chạy test:</p>
      <pre id="result"></pre-->
    </article>
    <script src="../../js/docs.js"></script>
    <script>
/**
 * Sử dụng biểu thức chính quy.
 */
function getParameter1(param, url) {
    if (!url) {
      	url = window.location.href;
    }
    param = param.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + param + "(=([^&#]*)|&|#|$)");
		var results = regex.exec(url);
    if (!results) {
      	return null;
    }
    if (!results[2]) {
      	return '';
    }
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

/**
 * Xử lý xâu bình thường.
 */
function getParameter2(param, url) {
	if (!url) {
    	// You could access location.search, which would give you from the ? character on to the end of the URL
    	// or the start of the fragment identifier (#foo), whichever comes first.
			url = window.location.search.substring(1);
	}
  var vars = url.split("&");
  for (var i = 0; i < vars.length; i++) {
    	var pair = vars[i].split("=");
    	if (pair[0] == param) {
        	return decodeURIComponent(pair[1]);
      }
  }
  return null;
}

/**
 */
function getParameter(param, url) {
    if (!url) {
    		url = window.location.search;
		}
  	var urlParams = new URLSearchParams(window.location.search);
  	return urlParams.get(param);
}
</script> <script>
//var url = "http://lockex1987.com/test?foo=lorem&bar=&baz";
var url = "http://lockex1987.com/test?foo=lorem&amp;bar=&amp;baz";
var foo = getParameter('foo', url); // "lorem"
var bar = getParameter('bar', url); // "" (present with empty value)
var baz = getParameter('baz', url); // "" (present with no value)
var qux = getParameter('qux', url); // null (absent)

//document.querySelector("#result").textContent = "foo: " + foo + "\nbar: " + bar + "\nbaz: " + baz + "\nqux: " + qux;
	</script>
  </body>
</html>
