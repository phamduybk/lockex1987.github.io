<!doctype html>
<html>
 <head> 
  <meta content="text/html; charset=UTF-8" http-equiv="content-type"> 
  <title>Install Docker on Windows 7</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link rel="icon" href="../../images/favicon.png"> 
  <link rel="stylesheet" href="../../css/style.css"> 
  <meta name="description" content="Install Docker on Windows 7">
 </head> 
 <body> 
  <article> 
   <p>Bạn có muốn chạy Docker trên Windows xịn như thế này không? Xem chi tiết nội dung bên dưới để được hướng dẫn nhé! ;)</p> 
   <p><a href="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/b5mfrfxak7_2016-11-17_10-15-48.png"></a></p> 
   <p> <img src="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/b5mfrfxak7_2016-11-17_10-15-48.png"> </p> 
   <a href="https://s3-ap-southeast-1.amazonaws.com/kipalog.com/b5mfrfxak7_2016-11-17_10-15-48.png"> </a> 
   <a></a> 
   <p></p> 
   <p>Docker trên Windows có 2 phiên bản:</p> 
   <ul> 
    <li>Docker for Windows yêu cầu OS là Windows 10 bật Hyper-V (không phải máy nào cũng hỗ trợ và chưa ổn định)</li> 
    <li>Docker Toolbox có thể cài trên bất kỳ OS Windows nào do dựa trên Virtual Box (bị giới hạn bởi các thiết lập mặc định của Virtual Box)</li> 
   </ul> 
   <p>Để chạy được Docker trên Windows dễ nhất thì thông thường sẽ cài Docker Toolbox. Tuy nhiên việc cài đặt và sử dụng Docker Toolbox trên Windows bạn sẽ gặp tương đối nhiều vấn đề:</p> 
   <ul> 
    <li>Không chạy được lệnh Docker ngoài Docker Quickstart Terminal rất bất tiện</li> 
    <li>Ngốn dung lượng ổ C do thiết lập mặc định Docker VM sẽ lưu trên ổ C</li> 
    <li>Bị giới hạn 20GB disk size do thiết lập mặc định của Docker VM dẫn đến vọc nhiều Docker image sẽ dần đến hết dung lượng ổ sớm</li> 
    <li>Thao tác lệnh Docker trên Windows không tiện do giới hạn của cmd trên Windows.</li> 
   </ul> 
   <p>Để giải quyết được vấn đề này bạn làm theo hướng dẫn dưới đây.</p> 
   <h3>1. Tải bản Docker ToolBox bản stable mới nhất</h3> 
   <p><a href="https://github.com/docker/toolbox/releases">https://github.com/docker/toolbox/releases</a></p> 
   <p> Cài đặt như bình thường.</p> 
   <p>Tuyệt đối không chạy Docker Toolbox sau khi cài đặt xong (để nó không tự khởi tạo với thiết lập mặc định).</p> 
   <h3>2. Thiết lập biến môi trường</h3> 
   <pre>DOCKER_MACHINE_NAME=default
MACHINE_STORAGE_PATH=D:\data\docker
DOCKER_TLS_VERIFY=1
DOCKER_HOST=tcp://192.168.99.100:2376
DOCKER_CERT_PATH=D:\data\docker\machines\default
</pre> 
   <p>Giải thích các thiết lập trên đây để giúp:</p> 
   <ul> 
    <li>Lưu data của Docker sang ổ khác (ở đây là ổ D thư mục <code>D:\data\docker</code>)</li> 
    <li>Các biến môi trường giúp chạy lệnh docker ngoài Docker Quickstart Terminal</li> 
   </ul> 
   <h3>3. Tạo Docker Machine</h3> 
   <p>Tạo thư mục lưu trữ data cho Docker:</p> 
   <pre><code>D:\data\docker\
</code></pre> 
   <p>Vào CMD gõ lệnh sau để tạo Docker Machine:</p> 
   <pre><code>docker-machine create -d virtualbox –virtualbox-disk-size "100000" default
</code></pre> 
   <p>Chú ý: lệnh trên sẽ tạo disk-size ~100GB để dùng cho thoải mái (bạn có thể tự điều chỉnh disk-size này)</p> 
   <h3>4. Chạy Docker Quickstart Terminal để start Docker VM</h3> 
   <p>Search + Run:</p> 
   <pre><code>Start Menu &gt; Docker Quickstart Terminal 
</code></pre> 
   <br> 
   <br> Docker có hỗ trợ trên Linux, Windows, Mac. Ở bài viết này, mình sẽ cài đặt trên môi trường Windows 10. Các môi trường khác cũng đơn giản như cài đặt các phần mềm khác. Hướng dẫn chi tiết tại 
   <a href="https://docs.docker.com/engine/installation/">docs.docker.com/engine/installation</a>. 
   <p>Để cài đặt trên Windows, thực hiện các bước sau:</p> 
   <ul> 
    <li>Tải và cài đặt phần mềm Docker: <a href="https://github.com/docker/toolbox/releases/download/v1.12.5/DockerToolbox-1.12.5.exe">https://github.com/docker/toolbox/releases/download/v1.12.5/DockerToolbox-1.12.5.exe</a></li> 
    <li>Sau khi cài đặt Docker xong sẽ hiện ra 2 ứng dụng: Docker Quickstart Terminal (dùng lệnh) và Kitematic(dùng giao diện). Ở phạm vi bài viết này mình dùng Docker Quickstart Terminal để có thể đối chiều qua khi cài đặt trên Linux.</li> 
    <li>Mở Docker Quickstart Terminal ở lần đầu tiên thì Docker sẽ tạo 1 máy áo ở Virtualbox với tên default (chú ý: đừng xóa nó đi nhé). Đồng thời IP public là 192.168.99.100 (nhớ IP này nhé).</li> 
   </ul> 
   <p><img src="http://image.prntscr.com/image/01892296c85546a2b75b6bd0414068b9.jpeg"><u> </u></p> 
   <p>Ghi chú: Ngoài màn hình Terminal của Docker, có thể sử dụng cmd, Gitbash… để sử dụng lệnh của Docker. Tuy nhiên có thể gặp lỗi này “An error occurred trying to connect: Get http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/images/json: open //./pipe/docker_engine: The system cannot find the file specified.”</p> 
   <p>Có thể sửa lỗi này bằng cách trước khi mỗi lần mở cmd hoặc Gitbash, dùng lệnh <code>docker-machine env</code> sau đó copy dòng cuối cùng của kết quả lệnh trên và thực thi.</p> 
   <p><img src="http://image.prntscr.com/image/0e06447eba5346a4a6f937c28ee01db6.jpeg"></p> 
   <p><br> </p> 
   <br> 
   <br> 
   <br> 
   <br> Tham khảo 
   <br> 
   <p>https://docs.docker.com/toolbox/toolbox_install_windows/#step-3-verify-your-installation</p> 
   <p>https://stackoverflow.com/questions/39373217/docker-looks-something-went-wrong-in-step-looking-for-vboxmanage-exe</p> 
   <p>https://github.com/boot2docker/boot2docker/releases</p> 
   <p><br> </p> 
   <p><br> </p> 
   <p><br> </p> 
  </article> 
  <script src="../../js/docs.js"></script>  
 </body>
</html>